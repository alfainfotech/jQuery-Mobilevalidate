(function(a){a.fn.mobilevalidate=function(h){var b=a.extend({trigger:"submit",find:'select,textarea,input[type!="submit"][type!="button"][type!="image"][type!="hidden"]',"class":"validate-error",novalidate:!1,css:".validate-error {box-shadow: 0px 0px 12px #e10000;}",dialog:"#errordialog",transition:"slideup",title:"Please correct the following:",delimiter:"\n - ",add:function(c,f){a(c).is('input[type="radio"]')||a(c).is('input[type="checkbox"]')?a('input[name="'+a(c).attr("name")+'"]').each(function(){a('label[for="'+
a(this).attr("id")+'"]').addClass(f["class"])}):a(c).is("select")?a(c).parent().addClass(f["class"]):a(c).addClass(f["class"])},remove:function(c,f){a(c).is('input[type="radio"]')||a(c).is('input[type="checkbox"]')?a('input[name="'+a(c).attr("name")+'"]').each(function(){a('label[for="'+a(this).attr("id")+'"]').removeClass(f["class"])}):a(c).is("select")?a(c).parent().removeClass(f["class"]):a(c).removeClass(f["class"])},label:function(c){var f=a(c).attr("id"),b=a(c).attr("name"),e="";if(a(c).is('input[type="radio"]')||
a(c).is('input[type="checkbox"]'))return(e=a(c).parent().parent().prev().text().replace(/\s*:$/,""))||(e=b.toLowerCase().replace(/\b[a-z]/g,function(a){return a.toUpperCase()})),e;f&&(c=a('label[for="'+f+'"]'))&&(e=c.text().replace(/\s*:$/,""));e||(e=b.toLowerCase().replace(/\b[a-z]/g,function(a){return a.toUpperCase()}));return e},callback:function(c,b){if(a(b.dialog).length){var d="\n<ul>\n"+a.map(c,function(a){return"<li>"+a+"</li>"}).join("\n")+"\n</ul>";b.title&&(d="<h2>"+b.title+"</h2>"+d);
var e=a(b.dialog).find('div:jqmData(role="content")');e.length?a(e.get(0)).html(d):a(b.dialog).html(d);a.mobile.changePage(a(b.dialog),{transition:b.transition,reverse:!1,changeHash:!0})}else alert(b.title+b.delimiter+c.join(b.delimiter));return!1},messages:{input:'Enter "%FIELDNAME%"',checkbox:'Check one or more "%FIELDNAME%"',radio:'Choose "%FIELDNAME%"',select:'Select an option from "%FIELDNAME%"',textarea:'Fill in the "%FIELDNAME%"'},fields:{integer:{pattern:/^-?\s*[0-9]+$/,message:'Enter an integer for "%FIELDNAME%"'},
numeric:{pattern:/^-?\s*[0-9]+\.?[0-9]*$|^-?\s*\.[0-9]+$/,message:'Enter a number for "%FIELDNAME%"'},"float":{pattern:/^-?\s*[0-9]+\.[0-9]+$/,message:'Enter a number for "%FIELDNAME%"'},postcode:{pattern:/^\d{3,4}$/,message:'Enter a valid "%FIELDNAME%"'},datetime:{pattern:/^(0?[1-9]|[1-2][0-9]|3[0-1])\/(0?[1-9]|1[0-2])\/[0-9]{4}|([0-9]{4}\-0?[1-9]|1[0-2])\-(0?[1-9]|[1-2][0-9]|3[0-1])\s+[0-9]{1,2}:[0-9]{2}$/,message:'Enter DD/MM/YYYY HH:SS for "%FIELDNAME%"'},date:{pattern:/^(0?[1-9]|[1-2][0-9]|3[0-1])\/(0?[1-9]|1[0-2])\/[0-9]{4}|([0-9]{4}\-0?[1-9]|1[0-2])\-(0?[1-9]|[1-2][0-9]|3[0-1])$/,
message:'Enter DD/MM/YYYY for "%FIELDNAME%"'},time:{pattern:/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/,message:'Enter HH:SS for "%FIELDNAME%"'},month:{pattern:/^(0?[1-9]|[1-2][0-9]|3[0-1])\-(0?[1-9]|1[0-2])$/,message:'Enter YYYY-MM for "%FIELDNAME%"'},first_name:{pattern:/^[a-zA-Z]+[- ]?[a-zA-Z]*$/},last_name:{pattern:/^[a-zA-Z]+[- ]?[a-zA-Z]+\s*,?([a-zA-Z]+|[a-zA-Z]+\.)?$/},email:{pattern:/^[\w\-\+\._]+\@[a-zA-Z0-9][-a-zA-Z0-9\.]*\.[a-zA-Z]+$/},confirm_password:{validate:function(c){var b=a(c).closest("form").find('input[type="password"][name!="'+
a(c).attr("name")+'"]'),d=a(c).val();if(a(c).attr("required")){if(null==d||""===d||b.length&&d!=b.val())return!1}else if(!(null==d||""===d)&&b.length&&d!=b.val())return!1;return!0},message:'"%FIELDNAME%" must match "Password"'},password:{pattern:/^[\w.!?@#$%&*]{5,}$/,message:'Enter "%FIELDNAME%" with minimum 5 characters'},money:{pattern:/^\-?\d{1,11}(\.\d{2})?$/},percentage:{pattern:/^-?\s*[0-9]+\.?[0-9]*$|^-?\s*\.[0-9]+$/},file:{pattern:/^[\w\s.!?@#$\(\)\'\_\-:%&*\/\\\\\[\]]+$/,message:'Choose a file for "%FIELDNAME%"'}}},
h),h=this.selector;this.jqmData(h)||(b.novalidate&&a(this).attr("novalidate","novalidate"),b.css&&a('<style type="text/css"></style>').html(b.css).appendTo("head"),a(this).find(b.find).each(function(){var c=a(this);if(c.is('input[type="radio"]')||c.is('input[type="checkbox"]')){var f=c.attr("name"),d=a('input[name="'+f+'"]').jqmData("validate");if(!d){var e=c.jqmData("message");if(!e){var g=b.label(this);a.map(b.fields,function(a,b){!c.jqmData("match")&&f.match(b)&&(a.message&&(e=a.message.replace("%FIELDNAME%",
g)),c.jqmData("match",b))});e||(e=c.is('input[type="radio"]')?b.messages.radio.replace("%FIELDNAME%",g):b.messages.checkbox.replace("%FIELDNAME%",g));c.jqmData("message",e)}c.jqmData("validate","true")}}else{var d=a(this).jqmData("validate"),h=c.attr("required"),i=c.attr("pattern"),e=c.jqmData("message");if("false"!=d||h||i||e)c.jqmData("validate","true"),c.attr("id"),f=c.attr("name"),g=b.label(this),a.map(b.fields,function(a,b){if(!c.jqmData("match")&&f.match(b)){if(!i&&a.pattern){var d=a.pattern+
"";c.attr("pattern",d.substring(1,d.length-1))}e||a.message&&(e=a.message.replace("%FIELDNAME%",g));c.jqmData("match",b)}}),e||(c.is("input")?(d=c.attr("type"),e=b.messages[d]?b.messages[d].replace("%FIELDNAME%",g):b.messages.input.replace("%FIELDNAME%",g)):c.is("select")?e=b.messages.select.replace("%FIELDNAME%",g):c.is("textarea")&&(e=b.messages.select.replace("%FIELDNAME%",g))),c.jqmData("message")||c.jqmData("message",e)}}),a(this).each(function(){a(this).bind(b.trigger,function(){var c=0,f=[];
a(this).find(b.find).each(function(){if("true"==a(this).jqmData("validate"))if(b.remove(this,b),a(this).is('input[type="radio"]')||a(this).is('input[type="checkbox"]')){var d=a(this).attr("name"),e=a('input[name="'+d+'"]').attr("required");if(a(this).is('input[type="radio"]')){if(e&&(d=a('input[name="'+d+'"]:checked').val(),null==d||""===d))c++,f.push(a(this).jqmData("message")),b.add(this,b)}else e&&!a('input[name="'+d+'"]:checked').map(function(){return a(this).val()}).length&&(c++,f.push(a(this).jqmData("message")),
b.add(this,b))}else{var e=a(this).attr("pattern"),d=a(this).val(),g=a(this).jqmData("match");if(a(this).attr("required"))if(g&&b.fields[g].validate)b.fields[g].validate(this)||(c++,f.push(a(this).jqmData("message")),b.add(this,b));else if(e){if(e=RegExp(e.replace(/^\//,"").replace(/\/$/,"")),null==d||""===d||!e.test(d))c++,f.push(a(this).jqmData("message")),b.add(this,b)}else{if(null==d||""===d)c++,f.push(a(this).jqmData("message")),b.add(this,b)}else if(!(null==d||""===d)&&g&&b.fields[g].validate)b.fields[g].validate(this)||
(c++,f.push(a(this).jqmData("message")),b.add(this,b));else if(!(null==d||""===d)&&e)e=RegExp(e),e.test(d)||(c++,f.push(a(this).jqmData("message")),b.add(this,b))}});return c?b.callback(f,b):!0})}),this.jqmData(h,1))}})(jQuery);